"use strict";const inputSearch=document.querySelector(".js-input"),listContainer=document.querySelector(".js-list-container-info"),button=document.querySelector(".js-button"),favContainer=document.querySelector(".js-fav-container-info");let series=[],favSeries=[];function setLocalStorage(){localStorage.setItem("favSeries",JSON.stringify(favSeries))}function getLocalStorage(){const e=JSON.parse(localStorage.getItem("favSeries"));null!==e?(favSeries=e,paintFavs()):getServerData()}function getServerData(){fetch(`http://api.tvmaze.com/search/shows?q=${inputSearch.value}`).then(function(e){return e.json()}).then(function(e){series=e,paintSeries(),listenFavs(),paintFavs()}).catch(function(e){console.log("Error al traer los datos del servidor",e)})}function paintSeries(){listContainer.innerHTML="";for(let e=0;e<series.length;e++){const t=document.createElement("li");t.setAttribute("id",`${series[e].show.id}`),!0===(-1!==favSeries.findIndex(function(t,n){return t.id===series[e].show.id}))?t.setAttribute("class","js-serie-container fav__serie__colors"):t.setAttribute("class","js-serie-container"),listContainer.appendChild(t);const n=document.createElement("h3");n.setAttribute("class","show__title");const s=document.createTextNode(`${series[e].show.name}`);n.appendChild(s),t.appendChild(n);const i=document.createElement("img");null===series[e].show.image?i.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?"):i.setAttribute("src",`${series[e].show.image.medium}`),t.appendChild(i)}listenFavs()}function addFavs(e){const t=parseInt(e.currentTarget.id),n=favSeries.findIndex(function(e,n){return e.id===t});if(!0===(-1!==n))favSeries.splice(n,1);else for(let e=0;e<series.length;e++)series[e].show.id===t&&favSeries.push(series[e].show);console.log(n),console.log(favSeries),setLocalStorage(),paintFavs(),listenFavs(),paintSeries()}function paintFavs(){favContainer.innerHTML="";for(let e=0;e<favSeries.length;e++){const t=document.createElement("li");favContainer.appendChild(t);const n=document.createElement("h3");n.setAttribute("class","show__title");const s=document.createTextNode(`${favSeries[e].name}`);n.appendChild(s),t.appendChild(n);const i=document.createElement("img");null===favSeries[e].image?i.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?"):i.setAttribute("src",`${favSeries[e].image.medium}`),t.appendChild(i)}}function listenFavs(){const e=document.querySelectorAll(".js-serie-container");for(const t of e)t.addEventListener("click",addFavs)}function handler(e){e.preventDefault(),getServerData()}button.addEventListener("click",handler),getLocalStorage();